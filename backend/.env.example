# =============================================================================
# EatFit24 Backend - Environment Variables Template
# =============================================================================
# This is a template file showing all required and optional environment variables.
# Copy this file to .env and fill in values for local development.
# For production (Docker), these variables MUST be set in docker-compose.yml or CI/CD.
# THIS FILE IS COMMITTED TO GIT - DO NOT PUT SECRETS HERE
# =============================================================================

# -----------------------------------------------------------------------------
# Django Core Settings (REQUIRED in production)
# -----------------------------------------------------------------------------
# SECURITY CRITICAL: Must be set in production, no defaults allowed
SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-base64-64
DEBUG=0
ALLOWED_HOSTS=localhost,127.0.0.1,eatfit24.ru
CSRF_TRUSTED_ORIGINS=https://eatfit24.ru,http://localhost:5173

# Django settings module
# Local dev: config.settings.local
# Production: config.settings.production (default in Docker)
DJANGO_SETTINGS_MODULE=config.settings.local

# -----------------------------------------------------------------------------
# Database Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# PostgreSQL connection settings
POSTGRES_DB=eatfit24
POSTGRES_USER=eatfit24
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_HOST=db
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Redis Configuration (REQUIRED for Celery)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# -----------------------------------------------------------------------------
# Telegram Bot Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Get bot token from @BotFather
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# -----------------------------------------------------------------------------
# YooKassa Payment Configuration (REQUIRED for payments)
# -----------------------------------------------------------------------------
# Get credentials from YooKassa dashboard
YOOKASSA_SHOP_ID=123456
YOOKASSA_SECRET_KEY=test_your_secret_key_here

# Payment webhook URL (must be accessible from YooKassa servers)
YOOKASSA_WEBHOOK_URL=https://eatfit24.ru/api/v1/billing/webhook/yookassa/

# -----------------------------------------------------------------------------
# OpenAI API Configuration (REQUIRED for AI features)
# -----------------------------------------------------------------------------
# Get API key from OpenAI platform
OPENAI_API_KEY=sk-your-openai-api-key-here

# -----------------------------------------------------------------------------
# CORS Configuration (REQUIRED in production)
# -----------------------------------------------------------------------------
# Frontend URL for CORS
CORS_ALLOWED_ORIGINS=https://eatfit24.ru,http://localhost:5173

# -----------------------------------------------------------------------------
# Static/Media Files (REQUIRED in production)
# -----------------------------------------------------------------------------
# Base URL for serving static files (nginx location)
STATIC_URL=/static/
# Base URL for serving media files (nginx location)
MEDIA_URL=/media/

# -----------------------------------------------------------------------------
# Docker Entrypoint Control (OPTIONAL)
# -----------------------------------------------------------------------------
# Migration safety (default: 1 = fail if migrations fail)
# Set to 0 ONLY for emergency recovery scenarios
MIGRATIONS_STRICT=1

# Run migrations on container start (default: 1)
RUN_MIGRATIONS=1

# Run collectstatic on container start (default: 1)
RUN_COLLECTSTATIC=1

# -----------------------------------------------------------------------------
# Logging Configuration (OPTIONAL)
# -----------------------------------------------------------------------------
# Docker best practice: logs go to stdout/stderr by default
# Set to 1 only if you need file-based logs (requires volume mount to /app/logs)

# Gunicorn access/error logs to files (default: 0 = stdout/stderr)
GUNICORN_LOG_TO_FILES=0

# Django application logs to files (default: 0 = stdout/stderr)
DJANGO_LOG_TO_FILES=0

# -----------------------------------------------------------------------------
# Development-Only Settings (DO NOT USE IN PRODUCTION)
# -----------------------------------------------------------------------------
# These are automatically set in config.settings.local
# DO NOT set these in production:
# - DEBUG=1 (security risk)
# - SECRET_KEY with default/weak value
# - ALLOWED_HOSTS=* (security risk)
# - Weak POSTGRES_PASSWORD

# -----------------------------------------------------------------------------
# Important Notes
# -----------------------------------------------------------------------------
# 1. NEVER commit .env file with real secrets to git
# 2. Generate SECRET_KEY: openssl rand -base64 64
# 3. All REQUIRED variables must be set in production
# 4. Docker containers inherit DJANGO_SETTINGS_MODULE from entrypoint
# 5. MIGRATIONS_STRICT=1 prevents starting with incompatible DB schema
# 6. Logs go to stdout/stderr by default (Docker best practice)
#
# Security checklist for production:
# ✅ DEBUG=0
# ✅ SECRET_KEY is random and secure
# ✅ ALLOWED_HOSTS contains only your domains
# ✅ CSRF_TRUSTED_ORIGINS matches your frontend URL
# ✅ CORS_ALLOWED_ORIGINS matches your frontend URL
# ✅ Strong POSTGRES_PASSWORD
# ✅ All API keys (Telegram, YooKassa, OpenAI) are production credentials
