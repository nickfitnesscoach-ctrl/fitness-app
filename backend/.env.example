# Django Settings
DEBUG=True
SECRET_KEY=your-secret-key-here-generate-with-django
DJANGO_SETTINGS_MODULE=config.settings.local

# Allowed Hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# PostgreSQL Database Configuration
POSTGRES_DB=foodmind
POSTGRES_USER=foodmind
POSTGRES_PASSWORD=supersecret
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Database URL (production - alternative to individual POSTGRES_* vars)
# DATABASE_URL=postgres://foodmind_user:password@db:5432/foodmind_db

# CORS Settings (comma-separated origins)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000

# Frontend & API URLs
FRONTEND_URL=http://localhost:3000
API_BASE_URL=http://localhost:8000

# OpenRouter AI Configuration
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_SITE_URL=http://localhost:8000
OPENROUTER_SITE_NAME=FoodMind AI

# AI Proxy Configuration (EatFit24 Internal Service)
# AI Proxy wraps OpenRouter API calls and is accessible only via Tailscale VPN
AI_PROXY_URL=http://100.84.210.65:8001
AI_PROXY_SECRET=your-ai-proxy-secret-key

# Email Configuration
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=FoodMind AI <noreply@foodmind.ai>

# ============================================================
# YooKassa Payment Configuration
# ============================================================

# Payment Mode: "test" or "prod"
# - test: используются YOOKASSA_SHOP_ID_TEST и YOOKASSA_API_KEY_TEST
# - prod: используются YOOKASSA_SHOP_ID_PROD и YOOKASSA_API_KEY_PROD
YOOKASSA_MODE=test

# Test Credentials (YooKassa Test Shop)
# Получить: https://yookassa.ru/ → Настройки → Тестовые данные
YOOKASSA_SHOP_ID_TEST=1201077
YOOKASSA_API_KEY_TEST=test_your_api_key_here

# Production Credentials (YooKassa Live Shop)
# ВНИМАНИЕ: Боевые данные! Реальные платежи с реальных карт!
# Получить: https://yookassa.ru/ → Настройки → Секретный ключ
# ВАЖНО: Прописывать ТОЛЬКО в production .env, НИКОГДА не коммитить в Git!
YOOKASSA_SHOP_ID_PROD=
YOOKASSA_API_KEY_PROD=

# Return URL after payment completion
# Используется для redirect после успешной/неудачной оплаты
YOOKASSA_RETURN_URL=https://eatfit24.ru/payments/return/

# Webhook Secret (optional, for additional security)
# Если не задан, проверка IP whitelist все равно работает
YOOKASSA_WEBHOOK_SECRET=

# ============================================================
# Тестирование Live-платежей
# ============================================================
#
# Для проверки боевого магазина используется тестовый тариф за 1₽.
#
# Как протестировать live-платежи:
# 1. Прописать YOOKASSA_SHOP_ID_PROD и YOOKASSA_API_KEY_PROD выше
# 2. Установить YOOKASSA_MODE=prod
# 3. Запустить backend: docker-compose up -d backend
# 4. Применить миграции: docker exec fm-backend python manage.py migrate billing
# 5. Авторизоваться в мини-апе под админом (telegram_id из TELEGRAM_ADMINS)
# 6. Открыть "Настройки → Подписка и оплата"
# 7. Нажать желтую кнопку "Тест: Оплатить 1₽ (live)"
# 8. Оплатить реальной картой
# 9. Проверить webhook: docker logs fm-backend -f | grep "payment.succeeded"
# 10. Убедиться, что статус обновился в БД и UI
#
# После тестирования вернуть YOOKASSA_MODE=test для разработки!
# ============================================================

# Telegram Bot
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_BOT_USERNAME=EatFit24_bot
TELEGRAM_ADMINS=310151740

# Bot API Secret - защита Bot API endpoints от внешних запросов
# Генерировать: openssl rand -hex 32
# Бот должен присылать этот секрет в заголовке X-Bot-Secret при вызове Bot API
TELEGRAM_BOT_API_SECRET=your-random-bot-api-secret-generate-with-openssl-rand-hex-32

# Redis & Celery Configuration
REDIS_URL=redis://127.0.0.1:6379/1
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Async AI Processing (set to True to enable background processing)
AI_ASYNC_ENABLED=False

# JSON Logging (production)
USE_JSON_LOGGING=False

# Swagger/API Documentation Basic Auth
SWAGGER_AUTH_USERNAME=admin
SWAGGER_AUTH_PASSWORD=change-this-password-in-production
