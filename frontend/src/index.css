@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Layout Tokens */
  --page-px: 16px;
  --section-gap: 20px;
  --card-p: 12px;
  --radius-card: 16px;
  --tap-h: 44px;
  --nav-h: 56px; /* Dynamic bottom nav height fallback */

  /* Safe Area Insets (Priority: Telegram > Browser > 0px) */
  --safe-top: var(--tg-safe-area-inset-top, env(safe-area-inset-top, 0px));
  --safe-bottom: var(--tg-safe-area-inset-bottom, env(safe-area-inset-bottom, 0px));
  --safe-left: var(--tg-safe-area-inset-left, env(safe-area-inset-left, 0px));
  --safe-right: var(--tg-safe-area-inset-right, env(safe-area-inset-right, 0px));
}

@media (min-width: 640px) {
  :root {
    --page-px: 20px;
  }
}

@media (min-width: 768px) {
  :root {
    --page-px: 24px;
  }
}

html, body {
  @apply bg-gray-50 text-gray-900;
  overflow-x: hidden;
  width: 100%;
  font-variant-numeric: tabular-nums;
  -webkit-tap-highlight-color: transparent;
}

@layer utilities {
  .px-page {
    padding-left: var(--page-px);
    padding-right: var(--page-px);
  }
  .mx-page {
    margin-left: var(--page-px);
    margin-right: var(--page-px);
  }
}

/* ============================================================
   iOS WebView Input Fix
   Ensures text is readable in Telegram WebView on iOS
   ============================================================ */
input,
select,
textarea {
  color: var(--tg-theme-text-color, #1f2937);
  -webkit-text-fill-color: var(--tg-theme-text-color, #1f2937);
  opacity: 1; /* Prevent iOS reduced opacity on disabled inputs */
}

input::placeholder,
textarea::placeholder {
  color: var(--tg-theme-hint-color, #9ca3af);
  -webkit-text-fill-color: var(--tg-theme-hint-color, #9ca3af);
}

/* iOS date/time input fix */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  appearance: none;
  -webkit-appearance: none;
  color: var(--tg-theme-text-color, #1f2937);
  -webkit-text-fill-color: var(--tg-theme-text-color, #1f2937);
}

/* iOS date picker pseudo-elements */
input[type="date"]::-webkit-date-and-time-value {
  text-align: left;
  color: var(--tg-theme-text-color, #1f2937);
}

/* Ensure number inputs are also readable */
input[type="number"] {
  color: var(--tg-theme-text-color, #1f2937);
  -webkit-text-fill-color: var(--tg-theme-text-color, #1f2937);
}
