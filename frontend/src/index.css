@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* iOS WebKit forced dark mode prevention */
  color-scheme: light;

  /* Layout Tokens */
  --page-px: 16px;
  --section-gap: 20px;
  --card-p: 12px;
  --radius-card: 16px;
  --tap-h: 44px;
  --nav-h: 56px; /* Dynamic bottom nav height fallback */

  /* Safe Area Insets (Priority: Telegram > Browser > 0px) */
  --safe-top: var(--tg-safe-area-inset-top, env(safe-area-inset-top, 0px));
  --safe-bottom: var(--tg-safe-area-inset-bottom, env(safe-area-inset-bottom, 0px));
  --safe-left: var(--tg-safe-area-inset-left, env(safe-area-inset-left, 0px));
  --safe-right: var(--tg-safe-area-inset-right, env(safe-area-inset-right, 0px));
}

@media (min-width: 640px) {
  :root {
    --page-px: 20px;
  }
}

@media (min-width: 768px) {
  :root {
    --page-px: 24px;
  }
}

html, body {
  @apply bg-gray-50 text-gray-900;
  color-scheme: light; /* iOS WebKit: duplicate on html for full coverage */
  overflow-x: hidden;
  width: 100%;
  font-variant-numeric: tabular-nums;
  -webkit-tap-highlight-color: transparent;
}

@layer utilities {
  .px-page {
    padding-left: var(--page-px);
    padding-right: var(--page-px);
  }
  .mx-page {
    margin-left: var(--page-px);
    margin-right: var(--page-px);
  }
}

/* ============================================================
   iOS WebView Input Fix
   Ensures text is readable in Telegram WebView on iOS
   ============================================================ */
input,
select,
textarea {
  color: #111827; /* slate-900 - explicit color for iOS WebKit */
  -webkit-text-fill-color: #111827; /* Critical: forces readable text on iOS */
}

input::placeholder,
textarea::placeholder {
  color: var(--tg-theme-hint-color, #9ca3af);
}

/* iOS date/time input fix */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  appearance: none;
  -webkit-appearance: none;
  color: #111827;
  -webkit-text-fill-color: #111827;
}

/* iOS date/time picker: value display */
input[type="date"]::-webkit-date-and-time-value,
input[type="time"]::-webkit-date-and-time-value,
input[type="datetime-local"]::-webkit-date-and-time-value {
  text-align: left;
  color: #111827;
  -webkit-text-fill-color: #111827;
}

/* iOS date/time picker: edit fields (focus/editing state) */
input[type="date"]::-webkit-datetime-edit,
input[type="date"]::-webkit-datetime-edit-text,
input[type="date"]::-webkit-datetime-edit-month-field,
input[type="date"]::-webkit-datetime-edit-day-field,
input[type="date"]::-webkit-datetime-edit-year-field,
input[type="time"]::-webkit-datetime-edit,
input[type="time"]::-webkit-datetime-edit-text,
input[type="time"]::-webkit-datetime-edit-hour-field,
input[type="time"]::-webkit-datetime-edit-minute-field,
input[type="datetime-local"]::-webkit-datetime-edit,
input[type="datetime-local"]::-webkit-datetime-edit-text,
input[type="datetime-local"]::-webkit-datetime-edit-month-field,
input[type="datetime-local"]::-webkit-datetime-edit-day-field,
input[type="datetime-local"]::-webkit-datetime-edit-year-field,
input[type="datetime-local"]::-webkit-datetime-edit-hour-field,
input[type="datetime-local"]::-webkit-datetime-edit-minute-field {
  color: #111827;
  -webkit-text-fill-color: #111827;
}

/* Ensure number inputs are also readable */
input[type="number"] {
  color: #111827;
  -webkit-text-fill-color: #111827;
}

/* ============================================================
   Modal Scroll Lock (iOS WebView Fix)
   Prevents background scroll when modal is open
   ============================================================ */
html.modal-open,
body.modal-open {
  overflow: hidden;
  overscroll-behavior: none;
}
